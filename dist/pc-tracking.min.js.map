{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./core/utils/each.js","webpack:///./core/utils/extend.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/config-default.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./lib/index.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./lib/utils/queue.js","webpack:///./lib/utils/optOut.js","webpack:///./lib/utils/localStorage.js","webpack:///./lib/extend-events.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/utils/md5.js","webpack:///./lib/helpers/getScreenProfile.js","webpack:///./lib/helpers/getWindowProfile.js","webpack:///./lib/helpers/getDomNodePath.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./lib/browser.js","webpack:///./core/index.js","webpack:///./core/utils/parse-params.js","webpack:///./core/utils/serialize.js","webpack:///./lib/utils/listener.js","webpack:///./lib/record-events-browser.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./core/utils/base64.js","webpack:///./lib/utils/fetchRetry.js","webpack:///./lib/utils/unique.js","webpack:///./lib/utils/cache-browser.js","webpack:///./lib/defer-events.js","webpack:///./lib/browser-auto-tracking.js","webpack:///./lib/helpers/getBrowserProfile.js","webpack:///./lib/helpers/getDatetimeIndex.js","webpack:///./lib/helpers/getDomainName.js","webpack:///./lib/helpers/getDomNodeProfile.js","webpack:///./lib/helpers/getScrollState.js","webpack:///./lib/helpers/getURLParams.js","webpack:///./lib/helpers/getUTMObject.js","webpack:///./lib/helpers/getUniqueId.js","webpack:///./lib/utils/cookie.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./lib/utils/serializeForm.js","webpack:///./lib/utils/timer.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","cb","Array","length","target","arguments","prop","g","this","Function","e","configDefault","queue","capacity","interval","retry","limit","initialDelay","retryOnResponseStatuses","unique","cache","dbName","dbCollectionName","dbCollectionKey","maxAge","__webpack_exports__","global","_index__WEBPACK_IMPORTED_MODULE_0__","_finally__WEBPACK_IMPORTED_MODULE_1__","globalNS","self","Error","Promise","callback","constructor","then","resolve","reason","reject","_queue","_optOut","PCCore","helpers","observers","on","client","extensions","events","collections","config","respectDoNotTrack","doNotTrack","optOut","setOptOut","optedOut","recordDeferredEvents","writeKey","str","String","referrerPolicy","setGlobalProperties","props","log","version","pkg","Emitter","obj","mixin","addEventListener","event","fn","_callbacks","push","once","off","apply","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","args","slice","len","listeners","hasListeners","fetch","support","searchParams","iterable","blob","Blob","formData","arrayBuffer","viewClasses","isDataView","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","toString","Headers","append","normalizeName","normalizeValue","oldValue","map","has","set","forEach","thisArg","keys","items","iteratorFor","values","entries","iterator","methods","Request","clone","body","_bodyInit","Body","Response","status","statusText","headers","url","error","response","type","redirectStatuses","redirect","RangeError","location","input","init","request","xhr","XMLHttpRequest","onload","rawHeaders","options","getAllResponseHeaders","replace","split","line","parts","shift","trim","join","responseURL","responseText","onerror","TypeError","ontimeout","open","method","credentials","withCredentials","responseType","setRequestHeader","send","polyfill","test","toLowerCase","next","done","undefined","isArray","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","buffer","_initBody","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","text","readAsText","chars","fromCharCode","readArrayBufferAsText","decode","json","JSON","parse","upcased","toUpperCase","referrer","form","bytes","decodeURIComponent","bodyInit","ok","configQueue","_extends","timer","_componentEmitter2","default","check","shouldFlushQueue","flush","pause","clearInterval","start","setInterval","isLocalStorageAvailable","localStorage","setItem","removeItem","_localStorage","lsTest","extendEvent","eventCollection","eventModifier","_typeof","handleValidationError","extendEvents","eventsModifier","getExtendedEventBody","_each2","modifierResult","_deepExtend","deepExtend","_each","message","j","stringify","MD5","_","f","charCodeAt","charAt","M","V","h","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","Y","X","md5_cmn","bit_rol","getScreenProfile","output","screen","orientation","angle","innerWidth","innerHeight","getWindowProfile","html","document","documentElement","height","offsetHeight","width","offsetWidth","scrollHeight","Math","max","clientHeight","ratio","availHeight","parseFloat","toFixed","availWidth","getDomNodePath","el","nodeName","stack","parentNode","sibCount","sibIndex","childNodes","sib","hasAttribute","id","unshift","setImmediate","_finally__WEBPACK_IMPORTED_MODULE_0__","setTimeoutFunc","setTimeout","noop","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","newValue","finale","_unhandledRejectionFn","Handler","ex","prom","all","arr","remaining","res","val","race","err","console","warn","_listener","_recordEventsBrowser","_deferEvents","_extendEvents","_browserAutoTracking","_getBrowserProfile","_getDatetimeIndex","_getDomainName","_getDomNodePath","_getDomNodeProfile","_getScreenProfile","_getScrollState","_getURLParams","_getUTMObject","_getUniqueId","_getWindowProfile","_cookie","_serializeForm","_timer","_extend2","recordEvent","recordEvents","deferEvent","deferEvents","queueCapacity","queueInterval","initAutoTracking","initAutoTrackingCore","getBrowserProfile","getDatetimeIndex","getDomainName","getDomNodeProfile","getScrollState","getUniqueId","getURLParams","getUTMObject","listener","listenerCore","utils","cookie","serializeForm","listenTo","listenerHash","eventType","selector","pcGlobals","webpackPCGlobals","getItem","navigator","PC","extendLibrary","PCTracking","env","previousPC","each","extend","parseParams","serialize","Client","configure","debug","isDefined","resources","legacyVersion","enabled","loaded","base","source","previous","noConflict","ready","host","protocol","requestType","userAgent","masterKey","projectId","path","baseUrl","arg","readyState","DOMContentLoaded","testDom","domReady","match","urlParams","pl","search","query","exec","data","encodeURIComponent","ctx","domListeners","attachEvent","addListener","evt","srcElement","handlers","elem","nodeList","querySelectorAll","matches","anchor","targetAttr","cbResponse","getAttribute","defaultPrevented","returnValue","preventDefault","metaKey","href","sendBeacon","catch","deferClickEvent","submit","deferFormSubmit","survivors","handler","hash","eventCollectionOrConfigObject","eventBody","_this","configObject","collection","event_collection","checkValidation","extendedEventsHash","_unique2","isUniqueResult","created","eventsHash","eventList","index","extendedEventBody","_package","_ref","_ref$configObject","clientConfig","getRequestUrl","base64","encode","modified","Date","getTime","appVersion","getUrlMaxLength","img","createElement","naturalHeight","naturalWidth","src","_fetchRetry2","Authorization","Content-Type","keen-sdk","connectionError","responseJSON","error_code","eventsSavedSuccessfuly","filter","success","checkEventsSavedSuccessfuly","scope","Timeout","clearFn","_id","_clearFn","clearTimeout","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","onreadystatechange","removeChild","appendChild","random","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","title","browser","argv","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","i1","i2","i3","e1","e2","e3","e4","utf8","isNaN","c2","c3","cc","retriesLimit","retryInitialDelay","retryOn","retriesCount","wrappedFetch","_configDefault","_cacheBrowser","uniqueIds","isUnique","customCacheConfig","configCache","stringifiedEvent","hashingMethod","_md2","expiryTime","now","alreadySentEvent","find","storage","getFromCache","saveToCache","indexedDBAvailable","cachingEnabled","db","cacheConfig","initializeIndexedDb","requestCacheConfig","dbConnectionRequest","indexedDB","onupgradeneeded","objectStore","createObjectStore","keyPath","createIndex","onsuccess","requestSave","transaction","add","configOptions","indexCleanUp","upperBoundOpenKeyRange","IDBKeyRange","upperBound","openCursor","cursor","delete","continue","responseFromCache","transactionDelete","num","Number","clonedQueueConfig","clonedQueueEvents","lib","trackingInitialized","load_id","ignoreDisabledFormFields","ignoreFormFieldTypes","recordClicks","recordClicksPositionPointer","recordChanges","recordFormSubmits","recordPageViews","recordPageViewsOnExit","recordScrollState","shareUuidAcrossDomains","collectIpAddress","collectUuid","collectSid","recordElementViews","catchError","sessionCookie","allTimeOnSiteS","allTimeOnSiteMS","hidden","visibilityChange","msHidden","webkitHidden","getSecondsSinceDate","getMiliSecondsSinceDate","domainName","hostname","cookieDomain","domain","uuid","sid","expires","setTime","initialReferrer","initialLandingPage","initialUTM","params","latestUTM","scrollState","dataLayer","_dataLayer$property","_dataLayer$status","_dataLayer$pageName","pageName","_objectWithoutPropert","_objectWithoutProperties","_objectWithoutPropert2","meta","browserProfile","tracked_by","local_time_full","toISOString","user","page","description","scroll_state","site_type","site_status","page_name","page_meta","time_on_page","time_on_page_ms","user_agent","tech","profile","pc","pcBaseObj","full","pop","reverse","pathname","qs","funnel","initial_landing_page","initial_utm","latest_utm","initial","element","pointer","x_position","pageX","y_position","pageY","serializerOptions","disabled","ignoreTypes","action","fields","firedPageview","IntersectionObserver","observer","isIntersecting","threshold","observe","date","round","cookies","cookieEnabled","codeName","appCodeName","getDocumentDescription","language","appName","online","onLine","platform","useragent","querySelector","content","hour_of_day","getHours","day_of_week","parseInt","getDay","day_of_month","getDate","month","getMonth","year","getFullYear","extractHostname","splitArr","arrLen","class","className","getElementProps","event_key","node_name","data_attributes","getDataAttributes","offsetLeft","clientLeft","offsetTop","clientTop","attributes","attr","camelCaseName","substr","$0","$1","state","pixel","pixel_max","ratio_max","pageYOffset","scrollTop","getScrollableArea","_extend","hashes","_hash$split","_hash$split2","_slicedToArray","_params$utm_source","utm_source","_params$utm_medium","utm_medium","_params$utm_campaign","utm_campaign","_params$utm_term","utm_term","_params$utm_content","utm_content","crypto","getRandomValues","v","Cookies","getJSON","expire","daysUntilExpire","remove","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","converter","api","defaults","setMilliseconds","getMilliseconds","write","escape","toUTCString","secure","rdecode","read","withConverter","serializer","hash_serializer","str_serialize","elements","radio_store","k_r_success_contrls","k_r_submitter","checked","empty","selectOptions","isSelectedOptions","option","allowedEmpty","hasValue","selected","brackets","hash_assign","between","_values","string","children","RegExp","parse_keys","existing","count","clear"],"mappings":"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","file":"pc-tracking.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export const configDefault = {\n\n  // defer events - queue\n  // https://github.com/pc/pc-tracking.js/blob/master/docs/defer-events.md\n  queue: {\n    capacity: 5000,\n    interval: 15,\n  },\n\n  // connection problems - retry request\n  retry: {\n    limit: 0,\n    initialDelay: 200,\n    retryOnResponseStatuses: [\n      408,\n      500,\n      502,\n      503,\n      504\n    ]\n  },\n\n  unique: true, // record only unique events?\n  // if so - store unique events hashes to compare\n  cache: {\n    /*\n      storage: 'indexeddb', // uncomment for persistence\n    */\n    dbName: 'pcTracking', // indexedDB name\n    dbCollectionName: 'events',\n    dbCollectionKey: 'hash',\n\n    /*\n      hashingMethod: 'md5', // if undefined - store as stringified JSON\n    */\n    maxAge: 60 * 1000, // store for 1 minute\n  }\n}\n\nexport default configDefault;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import PCCore from '../core';\nimport each from '../core/utils/each';\nimport extend from '../core/utils/extend';\nimport { queue } from'./utils/queue';\nimport { setOptOut } from './utils/optOut';\nimport pkg from '../package.json';\n\nPCCore.helpers = PCCore.helpers || {};\nPCCore.prototype.observers = PCCore.observers || {};\n\n// Install internal queue\nPCCore.on('client', function(client){\n  client.extensions = {\n    events: [],\n    collections: {}\n  };\n  \n  if (!client.config.respectDoNotTrack) {\n    this.doNotTrack = false;\n  }\n\n  if (typeof client.config.optOut !== 'undefined') {\n    setOptOut(client.config.optOut);\n    this.optedOut = client.config.optOut;\n  }\n  \n  client.queue = queue(client.config.queue);\n  client.queue.on('flush', function(){\n    client.recordDeferredEvents();\n  });\n});\n\n// Accessors\nPCCore.prototype.writeKey = function(str){\n  if (!arguments.length) return this.config.writeKey;\n  this.config.writeKey = (str ? String(str) : null);\n  return this;\n};\n\nPCCore.prototype.referrerPolicy = function(str){\n  if (!arguments.length) return this.config.referrerPolicy;\n  this.config.referrerPolicy = (str ? String(str) : null);\n  return this;\n};\n\n// DEPRECATED\nPCCore.prototype.setGlobalProperties = function(props){\n  PCCore.log('This method has been removed. Check out #extendEvents: https://github.com/pc/pc-tracking.js#extend-events');\n  return this;\n};\n\nPCCore.version = pkg.version;\n\nexport default PCCore;\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import Emitter from 'component-emitter';\n\nimport configDefault from '../config-default.js';\n\nexport function queue(configQueue = {}) {\n  if (this instanceof queue === false) {\n    return new queue(configQueue);\n  }\n  this.capacity = 0;\n  this.config = {\n    ...configDefault.queue,\n    ...configQueue\n  };\n  this.events = {\n    // \"collection-1\": [],\n    // \"collection-2\": []\n  };\n  this.interval = 0;\n  this.timer = null;\n  return this;\n}\n\nEmitter(queue.prototype);\n\nqueue.prototype.check = function() {\n  if (shouldFlushQueue(this)) {\n    this.flush();\n  }\n  if (this.config.interval === 0 || this.capacity === 0) {\n    this.pause();\n  }\n  return this;\n};\n\nqueue.prototype.flush = function() {\n  this.emit('flush');\n  this.interval = 0;\n  return this;\n};\n\nqueue.prototype.pause = function() {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  return this;\n};\n\nqueue.prototype.start = function() {\n  var self = this;\n  self.pause();\n  self.timer = setInterval(function() {\n    self.interval++;\n    self.check();\n  }, 1000);\n  return self;\n};\n\nfunction shouldFlushQueue(props) {\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\n    return true;\n  }\n  else if (props.capacity >= props.config.capacity) {\n    return true;\n  }\n  return false;\n}\n","import { isLocalStorageAvailable } from './localStorage';\n\nexport function setOptOut(optOut = true) {\n    if (!isLocalStorageAvailable) return;\n\n    if (optOut) {\n        localStorage.setItem('optout', optOut);\n        return;\n    }\n\n    localStorage.removeItem('optout');\n};\n","function lsTest(){\n  const test = 'test';\n  try {\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n  } catch(e) {\n      return false;\n  }\n}\n\nexport const isLocalStorageAvailable = lsTest();","import { deepExtend } from './utils/deepExtend';\nimport each from '../core/utils/each';\n\nexport function extendEvent(eventCollection, eventModifier){\n  if (arguments.length !== 2 || typeof eventCollection !== 'string'\n    || ('object' !== typeof eventModifier && 'function' !== typeof eventModifier)) {\n      handleValidationError.call(this, 'Incorrect arguments provided to #extendEvent method');\n      return;\n  }\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\n  this.extensions.collections[eventCollection].push(eventModifier);\n  this.emit('extendEvent', eventCollection, eventModifier);\n  return this;\n}\n\nexport function extendEvents(eventsModifier){\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\n    return;\n  }\n  this.extensions.events.push(eventsModifier);\n  this.emit('extendEvents', eventsModifier);\n  return this;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not extended: ${message}`);\n}\n\nexport function getExtendedEventBody(result, queue){\n  if (queue && queue.length > 0) {\n    each(queue, function(eventModifier, i){\n      let modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\n      deepExtend(result, modifierResult);\n    });\n  }\n  return result;\n}\n","export const deepExtend = function(target){\n  for (var i = 1; i < arguments.length; i++) {\n    // Copy unique items from incoming array\n    if (target instanceof Array && arguments[i] instanceof Array) {\n      for (var j = 0; j < arguments[i].length; j++) {\n        if (target.indexOf(arguments[i][j]) < 0) {\n          target.push(arguments[i][j]);\n        }\n      }\n    }\n    // Blend objects\n    else {\n      for (var prop in arguments[i]){\n        // Recurse when both contain objects of same name\n        // and incoming is not a null object\n        if (typeof target[prop] !== 'undefined'\n          && typeof target[prop] === 'object'\n          && typeof arguments[i][prop] === 'object'\n          && arguments[i][prop] !== null) {\n            deepExtend(target[prop], clone(arguments[i][prop]));\n        }\n        // Otherwise just copy it over...\n        else if (\n          arguments[i][prop] !== undefined &&\n          typeof arguments[i][prop] !== 'function') {\n            target[prop] = clone(arguments[i][prop]);\n        }\n      }\n    }\n  }\n  return target;\n}\n\nfunction clone(input){\n  return JSON.parse( JSON.stringify(input) );\n}\n","export const MD5 = function(d){const result = M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m=\"0123456789ABCDEF\",f=\"\",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _=\"\",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}\n\nexport default MD5;\n","export function getScreenProfile(){\n  var keys, output;\n\n  if ('undefined' == typeof window || !window.screen) return {};\n\n  keys = ['height', 'width', 'colorDepth', 'pixelDepth', 'availHeight', 'availWidth'];\n  output = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    output[keys[i]] = window.screen[keys[i]] ? window.screen[keys[i]] : null;\n  }\n\n  output.orientation = {\n    'angle' : window.screen.orientation ? window.screen.orientation['angle'] : 0,\n    'type'  : window.innerWidth > window.innerHeight ? 'landscape': 'portrait'\n  };\n\n  return output;\n}\n","export function getWindowProfile(){\n  var body, html, output;\n\n  if ('undefined' == typeof document) return {};\n\n  body = document.body || {};\n  html = document.documentElement || {};\n\n  output = {\n    'height': ('innerHeight' in window) ? window.innerHeight : document.documentElement.offsetHeight,\n    'width': ('innerWidth' in window) ? window.innerWidth : document.documentElement.offsetWidth,\n    'scrollHeight': Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null\n  };\n\n  if (window.screen) {\n    output.ratio = {\n      'height': (window.screen.availHeight) ? parseFloat( (window.innerHeight/window.screen.availHeight).toFixed(2) ) : null,\n      'width': (window.screen.availWidth) ? parseFloat( (window.innerWidth/window.screen.availWidth).toFixed(2) ) : null\n    };\n  }\n\n  return output;\n}\n\n/*\n  Notes:\n    document.documentElement.offsetHeight/Width is a workaround for IE8 and below, where window.innerHeight/Width is undefined\n*/\n","export function getDomNodePath(el){\n  if (!el.nodeName) return '';\n\n  var stack = [];\n  while ( el.parentNode != null ) {\n    // console.log(el.nodeName);\n    var sibCount = 0;\n    var sibIndex = 0;\n    for ( var i = 0; i < el.parentNode.childNodes.length; i++ ) {\n      var sib = el.parentNode.childNodes[i];\n      if ( sib.nodeName == el.nodeName ) {\n        if ( sib === el ) {\n          sibIndex = sibCount;\n        }\n        sibCount++;\n      }\n    }\n    if ( el.hasAttribute('id') && el.id != '' ) {\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id);\n    } else if ( sibCount > 1 ) {\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')');\n    } else {\n      stack.unshift(el.nodeName.toLowerCase());\n    }\n    el = el.parentNode;\n  }\n\n  return stack.slice(1).join(' > ');\n}\n\n\n// via: http://stackoverflow.com/a/16742828/2511985\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import PCCore from './index';\nimport each from '../core/utils/each';\nimport extend from '../core/utils/extend';\nimport { listenerCore } from './utils/listener';\nimport {\n  recordEvent,\n  recordEvents\n} from './record-events-browser';\nimport {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n} from './defer-events';\nimport { extendEvent, extendEvents } from './extend-events';\nimport { initAutoTrackingCore } from './browser-auto-tracking';\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\nimport { getDomainName } from './helpers/getDomainName';\nimport { getDomNodePath } from './helpers/getDomNodePath';\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\nimport { getScreenProfile } from './helpers/getScreenProfile';\nimport { getScrollState } from './helpers/getScrollState';\nimport { getURLParams } from './helpers/getURLParams';\nimport { getUTMObject } from './helpers/getUTMObject';\nimport { getUniqueId } from './helpers/getUniqueId';\nimport { getWindowProfile } from './helpers/getWindowProfile';\nimport { cookie } from './utils/cookie';\nimport { deepExtend } from './utils/deepExtend';\nimport { serializeForm } from './utils/serializeForm';\nimport { timer } from './utils/timer';\nimport { setOptOut } from './utils/optOut';\nimport { isLocalStorageAvailable } from './utils/localStorage';\n\n// ------------------------\n// Methods\n// ------------------------\nextend(PCCore.prototype, {\n  recordEvent,\n  recordEvents\n});\n\nextend(PCCore.prototype, {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents,\n  setOptOut\n});\nextend(PCCore.prototype, {\n  extendEvent,\n  extendEvents\n});\n\n// ------------------------\n// Auto-Tracking\n// ------------------------\nconst initAutoTracking = initAutoTrackingCore(PCCore);\nextend(PCCore.prototype, {\n  initAutoTracking\n});\n\n// ------------------------\n// Helpers\n// ------------------------\nextend(PCCore.helpers, {\n  getBrowserProfile,\n  getDatetimeIndex,\n  getDomainName,\n  getDomNodePath,\n  getDomNodeProfile,\n  getScreenProfile,\n  getScrollState,\n  getUniqueId,\n  getURLParams,\n  getUTMObject,\n  getWindowProfile\n});\n\n// ------------------------\n// Utils\n// ------------------------\nconst listener = listenerCore(PCCore);\nextend(PCCore.utils, {\n  cookie,\n  deepExtend,\n  listener,\n  serializeForm,\n  timer\n});\n\nPCCore.listenTo = (listenerHash) => {\n  each(listenerHash, (callback, key) => {\n    let split = key.split(' ');\n    let eventType = split[0],\n    selector = split.slice(1, split.length).join(' ');\n    // Create an unassigned listener\n    return listener(selector).on(eventType, callback);\n  });\n};\n\nexport let pcGlobals = undefined;\nif (typeof webpackPCGlobals !== 'undefined') {\n  pcGlobals = webpackPCGlobals;\n}\n\nif (isLocalStorageAvailable && localStorage.getItem('optout')) {\n  PCCore.optedOut = true;\n}\n\nif (navigator.doNotTrack === '1'\n  || navigator.doNotTrack === 'yes') {\n  PCCore.doNotTrack = true;\n}\n\nexport const PC = PCCore.extendLibrary(PCCore); // deprecated, left for backward compatibility\nexport const PCTracking = PC;\nexport default PC;","(function(env){\n  var previousPC = env.PC || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousPC && typeof previousPC.resources === 'undefined') {\n    Client.legacyVersion = previousPC;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}/'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousPC || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[PC]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.PC !== 'undefined') {\n      env.PC = Client.legacyVersion || previousPC;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      host         : 'clickstream.events',\n      protocol     : 'https',\n      requestType  : 'fetch',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","import Emitter from 'component-emitter';\nimport each from '../../core/utils/each';\n/*\n\n  // Create a new element listner\n  var myClickerCatcher = PC.utils.listener(\".nav li > a\");\n\n  // Listen for a given event\n  myClicker.on(\"click\", function(e){\n    // do stuff!\n  });\n\n  // Listen for event once\n  myClicker.once(\"click\", function(e){ });\n\n  // Cancel a given event listener\n  myClicker.off(\"click\");\n\n  // Cancel all event listners\n  myClicker.off();\n\n*/\n\nexport const listenerCore = function(ctx){\n\n  // Make sure this object exists\n  ctx.domListeners = ctx.domListeners || {\n    /*\n    'click': {\n      '.nav li > a': [fn, fn, fn]\n    }\n    */\n  };\n\n  function listener(str){\n    if (!str) return;\n    if (this instanceof listener === false) {\n      return new listener(str);\n    }\n    this.selector = str;\n    return this;\n  }\n\n  listener.prototype.on = function(str, fn){\n    var self = this;\n\n    if (arguments.length !== 2 || 'string' !== typeof str || 'function' !== typeof fn) return this;\n\n    // Set each listener on a parent dictionary, indexed by event:\n    if ('undefined' === typeof ctx.domListeners[str]) {\n      addListener(str, eventHandler(str));\n      ctx.domListeners[str] = {};\n    }\n    ctx.domListeners[str][self.selector] = ctx.domListeners[str][self.selector] || [];\n    ctx.domListeners[str][self.selector].push(fn);\n    return self;\n  };\n\n  listener.prototype.once = function(str, fn){\n    var self = this;\n    function on() {\n      self.off(str, on);\n      return fn.apply(self, arguments);\n    }\n    on.fn = fn;\n    self.on(str, on);\n    return self;\n  };\n\n  listener.prototype.off = function(str, fn){\n    var self = this, survivors = [];\n    if (arguments.length === 2) {\n      each(ctx.domListeners[str][self.selector], function(handler, i){\n        if (handler === fn || handler.fn === fn) return;\n        survivors.push(handler);\n      });\n      ctx.domListeners[str][self.selector] = survivors;\n    }\n    else if (arguments.length === 1) {\n      try {\n        delete ctx.domListeners[str][self.selector];\n      }\n      catch(e){\n        ctx.domListeners[str][self.selector] = [];\n      }\n    }\n    else {\n      // loop over every eventType and delete handlers\n      each(ctx.domListeners, function(hash, eventType){\n        // if ('undefined' === typeof hash[str]) return;\n        try {\n          delete ctx.domListeners[eventType][self.selector];\n        }\n        catch(e){\n          ctx.domListeners[eventType][self.selector] = function(){};\n        }\n      });\n    }\n    return self;\n  };\n\n  function eventHandler(eventType){\n    return function(e){\n      var evt, target;\n\n      evt = e || window.event;\n      target = evt.target || evt.srcElement;\n\n      // If nothing assigned to this event type, let it go\n      if ('undefined' === ctx.domListeners[eventType]) return;\n\n      each(ctx.domListeners[eventType], function(handlers, key){\n\n        if (matches(target, key)) {\n          // Call all handlers for this eventType + node\n          each(handlers, function(fn, i){\n            if ('click' === eventType && 'A' === target.nodeName) {\n              deferClickEvent(evt, target, fn);\n            }\n            else if ('submit' === eventType && 'FORM' === target.nodeName) {\n              deferFormSubmit(evt, target, fn);\n            }\n            else {\n              fn(evt);\n            }\n          });\n        }\n        else if ('window' === key) {\n          // Call all handlers\n          each(handlers, function(fn, i){\n            fn(evt);\n          });\n        }\n        return;\n      });\n    };\n  }\n\n  return listener;\n}\n\n\n// ------------------------------\n// Attach global event listener\n// ------------------------------\n\nfunction addListener(eventType, fn){\n  if (document.addEventListener) {\n    document.addEventListener(eventType, fn, false);\n  } else {\n    document.attachEvent(\"on\" + eventType, fn);\n  }\n}\n\n\n// ------------------------------\n// Match DOM element to selector\n// ------------------------------\n\nfunction matches(elem, selector) {\n  // We'll use querySelectorAll to find all element matching the selector,\n  // then check if the given element is included in that list.\n  // Executing the query on the parentNode reduces the resulting nodeList,\n  // document doesn't have a parentNode, though.\n  var nodeList = ( elem.parentNode || document ).querySelectorAll( selector ) || [],\n      i = nodeList.length;\n\n  // loop on the nodeList\n  while ( i-- ) {\n    if ( nodeList[i] == elem ) { return true; }\n  }\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'click' events (A)\n// ------------------------------\n\nfunction deferClickEvent(evt, anchor, callback){\n  var timeout = 500,\n      targetAttr,\n      cbResponse;\n\n  // Get 'target' attribute from anchor\n  if (anchor.getAttribute !== void 0) {\n    targetAttr = anchor.getAttribute(\"target\");\n  } else if (anchor.target) {\n    targetAttr = anchor.target;\n  }\n\n  // Fire listener and catch possible response (return false)\n  cbResponse = callback(evt);\n\n  // If prevented within callback, bail:\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Else if anchor doesn't kick off a new window or tab.. defer and replay the event:\n  else if (targetAttr !== '_blank' && targetAttr !== 'blank' && !evt.metaKey && !anchor.hasAttribute('download')) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    if (\n      anchor.href\n      && anchor.href !== '#'\n      && anchor.href !== (window.location + '#')\n    ) {\n      if (typeof cbResponse !== 'undefined') {\n        if (navigator && navigator.sendBeacon) {\n          window.location = anchor.href;\n          return;\n        }\n        // promise\n        cbResponse.then(() => {\n          window.location = anchor.href;\n        }).catch(err => {\n          // change location anyway - to not let user hanging\n          window.location = anchor.href;\n        });\n      } else {\n        setTimeout(function(){\n          window.location = anchor.href;\n        }, timeout);\n      }\n    }\n  }\n\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'submit' events (FORM)\n// ------------------------------\n\nfunction deferFormSubmit(evt, form, callback){\n  var timeout = 500;\n  // Fire listener and catch possible response (return false)\n  var cbResponse = callback(evt);\n\n  // If prevented within callback, bail\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Defer and replay event\n  else {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    if (typeof cbResponse !== 'undefined') {\n      if (navigator && navigator.sendBeacon) {\n        form.submit();\n        return;\n      }\n      // promise\n      cbResponse.then(() => {\n        form.submit();\n      }).catch(err => {\n        // submit form anyway - to not let user hanging\n        form.submit();\n      });\n    } else {\n      setTimeout(function(){\n        form.submit();\n      }, timeout);\n    }\n  }\n\n  return false;\n}\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport base64 from '../core/utils/base64';\nimport each from '../core/utils/each';\nimport extend from '../core/utils/extend';\n\nimport PC from './index';\nimport { version } from '../package.json';\nimport { getExtendedEventBody } from './extend-events';\nimport fetchRetry from './utils/fetchRetry';\nimport isUnique from './utils/unique';\n\n// ------------------------------\n// .recordEvent\n// ------------------------------\n\nexport function recordEvent(eventCollectionOrConfigObject, eventBody, callback){\n  let eventCollection = eventCollectionOrConfigObject;\n  let useBeaconApi = false;\n  let unique;\n  let configObject;\n  let clientConfig = this.config;\n\n  if (typeof eventCollectionOrConfigObject === 'object'\n    && eventCollectionOrConfigObject) {\n    // slowly but surely we migrate to one object with all args\n    configObject = eventCollectionOrConfigObject;\n    eventCollection = eventCollectionOrConfigObject.collection\n      || eventCollectionOrConfigObject.event_collection;\n    eventBody = eventCollectionOrConfigObject.event;\n    callback = eventCollectionOrConfigObject.callback;\n    unique = eventCollectionOrConfigObject.unique;\n  }\n\n  const url = this.url('events', encodeURIComponent(eventCollection));\n  let data = {};\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if (!eventCollection || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Collection name must be a string.', callback);\n    return;\n  }\n\n  extend(data, eventBody);\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  getExtendedEventBody(extendedEventsHash, this.extensions.events);\n  getExtendedEventBody(extendedEventsHash, this.extensions.collections[eventCollection]);\n  getExtendedEventBody(extendedEventsHash, [data]);\n\n  if (unique) {\n    return isUnique(configObject, extendedEventsHash).then(isUniqueResult => {\n      if (!isUniqueResult) {\n        return Promise.resolve({\n          created: false,\n          message: '[NOT_UNIQUE] This event has already been recorded'\n        });\n      }\n      return recordEvent.call(this, { ...eventCollectionOrConfigObject, unique: undefined });\n    });\n  }\n\n  this.emit('recordEvent', eventCollection, extendedEventsHash);\n\n  if (!PC.enabled) {\n    handleValidationError.call(this, 'PC.enabled is set to false.', callback);\n    return false;\n  }\n\n  if (PC.optedOut) {\n    return Promise.resolve({\n      created: false,\n      message: 'PC.optedOut is set to true.'\n    })\n  }\n\n  if (PC.doNotTrack) {\n    return Promise.resolve({\n      created: false,\n      message: 'PC.doNotTrack is set to true.'\n    })\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback, configObject, eventCollection });\n}\n\n// ------------------------------\n// .recordEvents\n// ------------------------------\n\nexport function recordEvents(eventsHash, callback){\n  const self = this;\n  const url = this.url('events');\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\n    handleValidationError.call(this, 'First argument must be an object', callback );\n    return;\n  }\n\n  if (arguments.length > 2) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', callback);\n    return;\n  }\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  each(eventsHash, function(eventList, eventCollection){\n    // Find or create collection on new hash\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\n    // Loop over each eventBody in the existing hash\n    each(eventList, function(eventBody, index){\n      // Create a new data object\n      let extendedEventBody = {};\n      // Process \"events\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\n      // Process \"collection\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\n      // Blend existing eventBody data into the result\n      getExtendedEventBody(extendedEventBody, [eventBody]);\n      // Push extendedEventBody into new hash\n      extendedEventsHash[eventCollection].push(extendedEventBody);\n    });\n  });\n\n  this.emit('recordEvents', extendedEventsHash);\n\n  if (!PC.enabled) {\n    handleValidationError.call(this, 'PC.enabled is set to false.', callback);\n    return false;\n  }\n\n  if (PC.optedOut) {\n    return Promise.resolve({\n      created: false,\n      message: 'PC.optedOut is set to true.'\n    })\n  }\n\n  if (PC.doNotTrack) {\n    return Promise.resolve({\n      created: false,\n      message: 'PC.doNotTrack is set to true.'\n    })\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback });\n}\n\nfunction send({ url, extendedEventsHash, callback, configObject = {}, eventCollection}){\n  const clientConfig = this.config;\n  const requestType = configObject.requestType // specific method for one request\n    || clientConfig.requestType; // global request type of client\n\n  if (\n    navigator && navigator.sendBeacon &&\n    requestType === 'beaconAPI'\n      // so you can send specific recordEvent() using beaconAPI\n      // even if your global client's config prefers Fetch\n  ) {\n    navigator.sendBeacon(\n      // `${url}?api_key=${this.writeKey()}`,\n      `${url}`,\n      JSON.stringify(extendedEventsHash)\n    );\n    if (callback) {\n      // Beacon API is not handling responses nor errors\n      callback();\n    }\n    return this;\n  }\n\n  // this is IMAGE beacon, not the Beacon API. deprecated\n  if (requestType === 'beacon' || requestType === 'img') {\n    const getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\n      // api_key  : this.writeKey(),\n      data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventsHash) ) ),\n      modified : new Date().getTime()\n    });\n    const getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\n\n    if (getRequestUrlOkLength) {\n      sendBeacon.call(this, getRequestUrl, callback);\n    }\n    else {\n      if (callback) {\n        callback('Beacon URL length exceeds current browser limit, and XHR is not supported.', null);\n      }\n    }\n    return this;\n  }\n\n  if (typeof fetch !== 'undefined') {\n    return sendFetch.call(this, 'POST', url, extendedEventsHash, callback);\n  }\n\n  return this;\n}\n\nfunction sendFetch(method, url, data, callback = undefined){\n  const self = this;\n\n  return fetchRetry(url, {\n      method,\n      body: data ? JSON.stringify(data) : '',\n      mode: 'cors',\n      redirect: 'follow',\n      referrerPolicy: self.referrerPolicy() || 'unsafe-url',\n      headers: {\n        'Authorization': self.writeKey(),\n        'Content-Type': 'application/json',\n        'keen-sdk': `javascript-${version}`\n      },\n      // keepalive: true, not supported for CORS yet\n      retry: self.config.retry\n    })\n    .catch(connectionError => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, connectionError, null);\n      }\n      self.emit('error', connectionError);\n      return Promise.reject(connectionError);\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      const eventsSavedSuccessfuly = checkEventsSavedSuccessfuly(responseJSON);\n      if (eventsSavedSuccessfuly) {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, null, responseJSON);\n        }\n        return Promise.resolve(responseJSON);\n      } else {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, responseJSON, null);\n        }\n        self.emit('error', responseJSON);\n        return Promise.reject(responseJSON);\n      }\n    });\n}\n\nfunction checkEventsSavedSuccessfuly(response){\n  // single event\n  if (typeof response.created !== 'undefined') {\n    if (response.created) {\n      return true;\n    }\n    return false;\n  }\n  // multiple events\n  const responseKeys = Object.keys(response);\n  const notSavedEvents = responseKeys\n    .map(collection => {\n      return response[collection].filter(event => !event.success);\n    })\n    .filter(collection => collection.length > 0);\n\n  if (notSavedEvents.length === 0) {\n    return true;\n  }\n\n  return false;\n}\n\n// Validation\nfunction checkValidation(callback){\n\n  // if (!this.projectId()) {\n  //   handleValidationError.call(this, 'PC.Client is missing a projectId property.', callback);\n  //   return false;\n  // }\n  // if (!this.writeKey()) {\n  //   handleValidationError.call(this, 'PC.Client is missing a writeKey property.', callback);\n  //   return false;\n  // }\n  return true;\n}\n\nfunction handleValidationError(message, callback){\n  const err = `Event(s) not recorded: ${message}`;\n  this.emit('error', err);\n  if (callback) {\n    callback.call(this, err, null);\n  }\n}\n\nfunction getUrlMaxLength(){\n  if ('undefined' !== typeof window && navigator) {\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n      return 1900;\n    }\n  }\n  return 16000;\n}\n\n/*\n  DEPRECATED METHODS\n*/\n\n// Image Beacon Requests\n// DEPRECATED\nfunction sendBeacon(url, callback){\n  var self = this,\n      img = document.createElement('img'),\n      loaded = false;\n\n  img.onload = function() {\n    loaded = true;\n    if ('naturalHeight' in this) {\n      if (this.naturalHeight + this.naturalWidth === 0) {\n        this.onerror();\n        return;\n      }\n    } else if (this.width + this.height === 0) {\n      this.onerror();\n      return;\n    }\n    if (callback) {\n      callback.call(self);\n    }\n  };\n  img.onerror = function() {\n    loaded = true;\n    if (callback) {\n      callback.call(self, 'An error occurred!', null);\n    }\n  };\n  img.src = url + '&c=clv1';\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = {\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  encode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\n    n = this.utf8.encode(n);\n    while (i < n.length) {\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\n    } return o;\n  },\n  decode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    while (i < n.length) {\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\n      c3 = ((e3 & 3) << 6) | e4;\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\n    } return this.utf8.decode(o);\n  },\n  utf8: {\n    encode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\n        } return o;\n    },\n    decode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i);\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\n      } return o;\n    }\n  }\n};\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport configDefault from '../config-default.js';\n\nexport default function(url, options) {\n  const config = {\n    ...configDefault,\n    ...(options.retry || {})\n  };\n\n  const retriesLimit = config.retry.limit;\n  const retryInitialDelay = config.retry.initialDelay;\n  const retryOn = config.retry.retryOnResponseStatuses;\n  let retriesCount = 0;\n\n  if (retryOn && !(retryOn instanceof Array)) {\n    throw {\n      name: 'ArgumentError',\n      message: 'retryOn property expects an array'\n    }\n  }\n\n  return new Promise(function(resolve, reject) {\n    const wrappedFetch = function(n) {\n      fetch(url, options)\n        .then(function(response) {\n          if (retryOn.indexOf(response.status) === -1) {\n            resolve(response);\n          } else {\n            if (n > 0) {\n              retry();\n            } else {\n              reject(response);\n            }\n          }\n        })\n        .catch(function(error) {\n          if (n > 0) {\n            retry();\n          } else {\n            reject(error);\n          }\n        });\n    };\n\n    function retry() {\n      retriesCount = retriesCount + 1;\n      setTimeout(function() {\n          wrappedFetch(retriesLimit - retriesCount);\n        }, 2^retriesCount * retryInitialDelay);\n    }\n\n    wrappedFetch(retriesLimit - retriesCount);\n  });\n};\n","import 'promise-polyfill/src/polyfill';\n\nimport md5 from './md5';\nimport { getFromCache, saveToCache } from './cache-browser';\n\nimport configDefault from '../config-default.js';\n\nlet uniqueIds = [];\n\nexport const isUnique = (customCacheConfig, extendedEventBody) => {\n  const configCache = { ...configDefault.cache, ...customCacheConfig.cache };\n  const stringifiedEvent = JSON.stringify(extendedEventBody);\n  const { hashingMethod } = configCache;\n  const hash = hashingMethod && hashingMethod.toLowerCase() === 'md5'\n    ? md5(stringifiedEvent) : stringifiedEvent;\n  const expiryTime = configCache.maxAge ? (Date.now() + configCache.maxAge) : undefined;\n  const item = {\n    hash,\n    expiryTime\n  };\n  if (expiryTime){\n    const now = Date.now();\n    uniqueIds = uniqueIds.filter(item => item.expiryTime > now);\n  }\n\n  const alreadySentEvent = uniqueIds.find(item => item.hash === hash);\n  if (alreadySentEvent) {\n    if (alreadySentEvent.expiryTime && alreadySentEvent.expiryTime < Date.now()) {\n      uniqueIds = uniqueIds.filter(item => item.hash !== hash);\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n  uniqueIds.push(item);\n  if (configCache.storage && configCache.storage.toLowerCase() === 'indexeddb') {\n    return getFromCache(hash, configCache).then(alreadySentEvent => {\n      if (alreadySentEvent) {\n        return false;\n      }\n      saveToCache(hash, configCache);\n      return true;\n    });\n  }\n\n  return Promise.resolve(true);\n}\n\nexport default isUnique;\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport md5 from './md5';\n\nimport configDefault from '../config-default.js';\n\nif (typeof self === 'undefined') {\n  console.log('IndexedDB is available only in Browser ENV');\n}\n\nconst indexedDBAvailable = typeof self !== 'undefined' && 'indexedDB' in self;\n\nlet cachingEnabled = true;\n\nif (!indexedDBAvailable) {\n    // console.log(\"Your browser doesn't support a stable version of IndexedDB.\");\n    cachingEnabled = false; // graceful degradation\n}\n\nlet db;\nlet cacheConfig = {\n  ...configDefault.cache\n};\n\nfunction initializeIndexedDb(requestCacheConfig = {}){\n  if (db) { return Promise.resolve(); }\n  if (!cachingEnabled) { return Promise.resolve(); }\n  cacheConfig = {\n    ...cacheConfig,\n    ...requestCacheConfig\n  };\n  return new Promise((resolve, reject) => {\n    const dbConnectionRequest = self.indexedDB.open(cacheConfig.dbName);\n    dbConnectionRequest.onerror = function(event) {\n      cachingEnabled = false;\n      resolve();\n    };\n\n    dbConnectionRequest.onupgradeneeded = function(event) {\n      const db = event.target.result;\n      const objectStore = db\n        .createObjectStore(cacheConfig.dbCollectionName,\n          { keyPath: cacheConfig.dbCollectionKey });\n      objectStore.createIndex(\n        cacheConfig.dbCollectionKey,\n        cacheConfig.dbCollectionKey,\n        { unique: true }\n      );\n      objectStore.createIndex('expiryTime', 'expiryTime', { unique: false });\n    };\n\n    dbConnectionRequest.onsuccess = function(event) {\n      db = event.target.result;\n      db.onerror = function(event) {\n        cachingEnabled = false; // graceful degradation\n      };\n      resolve(db);\n    };\n  });\n}\n\nexport const saveToCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    const transactionSave = db\n      .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n      .objectStore(cacheConfig.dbCollectionName);\n    const requestSave = transactionSave.add({\n      hash,\n      expiryTime: Date.now() + cacheConfig.maxAge\n    });\n    requestSave.onsuccess = function(event) {\n    };\n    requestSave.onerror = function(event) {\n      cachingEnabled = false;\n    };\n  });\n}\n\nexport const getFromCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    return new Promise((resolve, reject) => {\n      if (!cachingEnabled) {\n        return resolve(null);\n      }\n\n      const transactionCleanUp = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const indexCleanUp = transactionCleanUp.index('expiryTime');\n      const upperBoundOpenKeyRange = IDBKeyRange.upperBound(Date.now(), true);\n      indexCleanUp.openCursor(upperBoundOpenKeyRange).onsuccess = function(event) {\n        let cursor = event.target.result;\n        if (cursor) {\n          let transactionDelete = db\n            .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n            .objectStore(cacheConfig.dbCollectionName)\n            .delete(event.target.result.value[cacheConfig.dbCollectionKey]);\n          cursor.continue();\n        }\n      };\n\n      const transactionIndex = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const index = transactionIndex.index(cacheConfig.dbCollectionKey);\n      const responseFromCache = index.get(hash);\n      responseFromCache.onsuccess = function(event) {\n        if (!event.target.result ||\n          event.target.result.expiryTime < Date.now()\n        ) {\n          if (event.target.result && event.target.result.expiryTime < Date.now()){\n            const transactionDelete = db\n              .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n              .objectStore(cacheConfig.dbCollectionName)\n              .delete(event.target.result[cacheConfig.dbCollectionKey]);\n            transactionDelete.onsuccess = (event) => {\n              resolve(getFromCache(hash, configOptions));\n            };\n            transactionDelete.onerror = (event) => {\n              cachingEnabled = false;\n              resolve(getFromCache(hash, configOptions));\n            };\n            return resolve(null);\n          }\n          return resolve(null);\n        } else {\n          return resolve(event.target.result);\n        }\n      };\n      responseFromCache.onerror = function(event) {\n        cachingEnabled = false;\n        resolve(getFromCache(hash, configOptions));\n      };\n    });\n  });\n}\n","import PC from './index';\nimport each from '../core/utils/each';\nimport { queue } from './utils/queue';\n\nexport function deferEvent(eventCollection, eventBody){\n\n  if (arguments.length !== 2 || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvent method');\n    return;\n  }\n\n  this.queue.events[eventCollection] = this.queue.events[eventCollection] || [];\n  this.queue.events[eventCollection].push(eventBody);\n  this.queue.capacity++;\n  if (!this.queue.timer) {\n    this.queue.start();\n  }\n  this.emit('deferEvent', eventCollection, eventBody);\n  return this;\n}\n\nexport function deferEvents(eventsHash){\n  var self = this;\n\n  if (arguments.length !== 1 || typeof eventsHash !== 'object') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvents method');\n    return;\n  }\n\n  each(eventsHash, function(eventList, eventCollection){\n    self.queue.events[eventCollection] = self.queue.events[eventCollection] || [];\n    self.queue.events[eventCollection] = self.queue.events[eventCollection].concat(eventList);\n    self.queue.capacity = self.queue.capacity + eventList.length;\n    if (!self.queue.timer) {\n      self.queue.start();\n    }\n  });\n  self.emit('deferEvents', eventsHash);\n  return self;\n}\n\nexport function queueCapacity(num){\n  if (!arguments.length) return this.queue.config.capacity;\n  this.queue.config.capacity = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function queueInterval(num){\n  if (!arguments.length) return this.queue.config.interval;\n  this.queue.config.interval = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function recordDeferredEvents(){\n  const self = this;\n\n  if (self.queue.capacity > 0) {\n    self.queue.pause();\n    let clonedQueueConfig = { ...self.queue.config };\n    let clonedQueueEvents = { ...self.queue.events };\n    self.queue = queue();\n    self.queue.config = clonedQueueConfig;\n    self.queue.on('flush', function(){\n      self.recordDeferredEvents();\n    });\n    self.emit('recordDeferredEvents', clonedQueueEvents);\n    self.recordEvents(clonedQueueEvents, (err, res) => {\n      if (err) {\n        self.emit('recordDeferredEventsError', err, clonedQueueEvents);\n      }\n    });\n  }\n  return self;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not deferred: ${message}`);\n}\n","import pkg from '../package.json';\n\nexport function initAutoTrackingCore(lib) {\n  return function (obj) {\n    const client = this;\n\n    if (!window.trackingInitialized) {\n      window.trackingInitialized = true\n      const helpers = lib.helpers;\n      const utils = lib.utils;\n      const load_id = helpers.getUniqueId();\n      const options = utils.extend({\n        ignoreDisabledFormFields: false,\n        ignoreFormFieldTypes: ['password'],\n        recordClicks: true,\n        recordClicksPositionPointer: false,\n        recordChanges: true,\n        recordFormSubmits: false,\n        recordPageViews: true,\n        recordPageViewsOnExit: false,\n        recordScrollState: true,\n        shareUuidAcrossDomains: true,\n        collectIpAddress: true,\n        collectUuid: true,\n        collectSid: true,\n        recordElementViews: true,\n        requestType: 'fetch',\n        catchError: undefined // optional, function(someError) - error handler\n      }, obj);\n\n      if (client.config.requestType === 'beaconAPI' && options.catchError) {\n        throw `You cannot use the BeaconAPI and catchError function in the same time, because BeaconAPI ignores errors. For requests with error handling - use requestType: 'fetch'`;\n        return;\n      }\n\n      if (\n        client.config.requestType === 'jsonp' // jsonp is deprecated, it's the default value from old pc's client\n      ) {\n        if (options.catchError) {\n          client.config.requestType = 'fetch';\n        } else {\n          client.config.requestType = 'beaconAPI';\n        }\n      }\n\n      let now = new Date();\n      const cookie = new utils.cookie('pc');\n      const sessionCookie = new utils.cookie('pc_session');\n\n      let allTimeOnSiteS = 0;\n      let allTimeOnSiteMS = 0;\n      if(typeof document !== 'undefined') {\n        let hidden;\n        let visibilityChange;\n        if (typeof document.hidden !== \"undefined\") {\n          hidden = \"hidden\";\n          visibilityChange = \"visibilitychange\";\n        } else if (typeof document.msHidden !== \"undefined\") {\n          hidden = \"msHidden\";\n          visibilityChange = \"msvisibilitychange\";\n        } else if (typeof document.webkitHidden !== \"undefined\") {\n          hidden = \"webkitHidden\";\n          visibilityChange = \"webkitvisibilitychange\";\n        }\n\n        const handleVisibilityChange = () => {\n          if(document[hidden]) {\n            allTimeOnSiteS += getSecondsSinceDate(now);\n            allTimeOnSiteMS += getMiliSecondsSinceDate(now);\n            return;\n          } \n          now = new Date();\n        }\n        if(typeof document.addEventListener !== \"undefined\" ||\n          hidden !== undefined){\n          document.addEventListener(visibilityChange, handleVisibilityChange, false); \n        }\n      }\n\n      const domainName = helpers.getDomainName(window.location.hostname);\n      const cookieDomain = domainName && options.shareUuidAcrossDomains ? {\n        domain: '.' + domainName\n      } : {};\n\n      let uuid;\n      if (options.collectUuid) {\n        uuid = cookie.get('uuid');\n        if (!uuid) {\n          uuid = helpers.getUniqueId();\n          cookie.set('uuid', uuid, cookieDomain);\n        }\n      }\n      \n      let sid;\n      if (options.collectSid) {\n        var expires = new Date();\n        sid = sessionCookie.get('sid');\n        expires.setTime(expires.getTime() + (30 * 60 * 1000));\n        if (!sid) {\n          sid = helpers.getUniqueId();\n        }\n        sessionCookie.set('sid', sid, { expires })\n      }\n\n      let initialReferrer = cookie.get('initialReferrer');\n      if (!initialReferrer) {\n        initialReferrer = document && document.referrer || undefined;\n        cookie.set('initialReferrer', initialReferrer, cookieDomain);\n      }\n\n      let initialLandingPage = cookie.get('initialLandingPage');\n      if (!initialLandingPage) {\n        initialLandingPage = window.location.href;\n        cookie.set('initialLandingPage', initialLandingPage, cookieDomain);\n      }\n\n      let initialUTM = cookie.get('initialUTM');\n      if (!initialUTM) {\n        let query = window.location.search.slice(1).toLowerCase();\n        let params = helpers.getURLParams(query)\n        initialUTM = helpers.getUTMObject(params)\n        cookie.set('initialUTM', initialUTM, cookieDomain);\n      }\n\n      let latestUTM = cookie.get('latestUTM');\n      if (window.location.search.toLowerCase().indexOf('utm_campaign') > -1) {\n        let query = window.location.search.slice(1).toLowerCase();\n        let params = helpers.getURLParams(query)\n        latestUTM = helpers.getUTMObject(params)\n        cookie.set('latestUTM', latestUTM, cookieDomain);\n      }\n\n      let scrollState = {};\n      if (options.recordScrollState) {\n        scrollState = helpers.getScrollState();\n        utils.listener('window').on('scroll', () => {\n          scrollState = helpers.getScrollState(scrollState);\n        });\n      }\n\n      let dataLayer = window.dataLayer && window.dataLayer.length > 0 ? window.dataLayer[0] : {};\n      let { property = null, status = null, pageName = null , ...meta =  {}} = dataLayer;\n      client.extendEvents(function () {\n        const browserProfile = helpers.getBrowserProfile();\n        \n        let sid;\n        if (options.collectSid) {\n          var expires = new Date();\n          sid = sessionCookie.get('sid');\n          expires.setTime(expires.getTime() + (30 * 60 * 1000));\n          if (!sid) {\n            sid = helpers.getUniqueId();\n          }\n          sessionCookie.set('sid', sid, { expires })\n        }\n        \n        return {\n          tracked_by: pkg.name + '-' + pkg.version,\n          local_time_full: new Date().toISOString(),\n          user: {\n            uuid,\n            sid\n          },\n          page: {\n            load_id: load_id,\n            title: document ? document.title : null,\n            description: browserProfile.description,\n            scroll_state: scrollState,\n            site_type: property,\n            site_status: status,\n            page_name: pageName,\n            page_meta: meta,\n            time_on_page: allTimeOnSiteS > 0 ? allTimeOnSiteS : getSecondsSinceDate(now),\n            time_on_page_ms: allTimeOnSiteMS > 0 ? allTimeOnSiteMS : getMiliSecondsSinceDate(now)\n          },\n          user_agent: window.navigator.userAgent,\n          tech: {\n            profile: browserProfile\n          },\n          pc: window && window.pcBaseObj ? window.pcBaseObj : {},\n          url: {\n            full: window ? window.location.href : '',\n            host: window ? window.location.hostname : '',\n            domain: window ? getDomain(window.location.hostname) : '',\n            path: window ? window.location.pathname : '',\n            qs: window ? window.location.search : '',\n          },\n          funnel: {\n            initial_landing_page: initialLandingPage,\n            initial_utm: initialUTM,\n            latest_utm: latestUTM,\n          },\n          referrer: {\n            initial: initialReferrer,\n            full: document ? document.referrer : '',\n          }\n        };\n      });\n\n      if (options.recordClicks === true) {\n        utils.listener('a, a *, button').on('click', function (e) {\n          const el = e.target;\n          let event = {\n            element: helpers.getDomNodeProfile(el),\n            local_time_full: new Date().toISOString()\n          };\n\n          // pointer position tracking\n          if(options.recordClicksPositionPointer === true) {\n            const pointer = {\n              x_position: e.pageX,\n              y_position: e.pageY,\n            }\n            event = {...event, pointer};\n          }\n\n          if (options.catchError) {\n            return client\n              .recordEvent({\n                collection: 'clicks',\n                event\n              }).catch(err => {\n                options.catchError(err);\n              });\n          }\n\n          return client\n            .recordEvent({\n              collection: 'clicks',\n              event\n            });\n        });\n      }\n\n      if (options.recordChanges === true) {\n        utils.listener('*').on('change', function (e) {\n          const el = e.target;\n          const event = {\n            element: helpers.getDomNodeProfile(el),\n            local_time_full: new Date().toISOString()\n          };\n\n          if (options.catchError) {\n            return client\n              .recordEvent({\n                collection: 'changes',\n                event\n              }).catch(err => {\n                options.catchError(err);\n              });\n          }\n          return client\n            .recordEvent({\n              collection: 'changes',\n              event\n            });\n        });\n      }\n\n      if (options.recordFormSubmits === true) {\n        utils.listener('form').on('submit', function (e) {\n          const el = e.target;\n          const serializerOptions = {\n            disabled: options.ignoreDisabledFormFields,\n            ignoreTypes: options.ignoreFormFieldTypes\n          };\n          const event = {\n            form: {\n              action: el.action,\n              fields: utils.serializeForm(el, serializerOptions),\n              method: el.method\n            },\n            element: helpers.getDomNodeProfile(el),\n            local_time_full: new Date().toISOString()\n          };\n\n          if (options.catchError) {\n            return client\n              .recordEvent({\n                collection: 'form_submissions',\n                event\n              })\n              .catch(err => {\n                options.catchError(err);\n              });\n          }\n\n          return client.recordEvent({\n            collection: 'form_submissions',\n            event\n          });\n        });\n      }\n\n      if (options.recordPageViews === true && !options.recordPageViewsOnExit && !client.firedPageview) {\n        client.firedPageview = true;\n        if (options.catchError) {\n          client\n            .recordEvent({\n              collection: 'pageviews'\n            })\n            .catch(err => {\n              options.catchError(err);\n            });\n        } else {\n          client\n            .recordEvent({\n              collection: 'pageviews'\n            });\n        }\n      }\n\n      if (options.recordPageViewsOnExit && typeof window !== 'undefined') {\n        window.addEventListener('beforeunload', () => {\n          client.config.requestType = 'beaconAPI'; // you can run beforeunload only with beaconAPI\n          client.recordEvent({\n            collection: 'pageviews'\n          });\n        });\n      }\n      \n      if(options.recordElementViews === true){\n        if(typeof IntersectionObserver !== 'undefined'){\n          const elementViewsOptions = {\n            threshold: 1.0,\n          }\n          const elementViewsCallback = (events, observer) => {\n            events.forEach(el => {\n              if(el.isIntersecting){\n                let event = {\n                  element: helpers.getDomNodeProfile(el.target),\n                  local_time_full: new Date().toISOString()\n                }\n                if (options.catchError) {\n                  return client\n                    .recordEvent({\n                      collection: 'element_views',\n                      event\n                    }).catch(err => {\n                      options.catchError(err);\n                    });\n                }\n  \n                return client\n                  .recordEvent({\n                    collection: 'element_views',\n                    event\n                  });\n              }\n            })\n          }\n          const observer = new IntersectionObserver(elementViewsCallback, elementViewsOptions);\n          const target = document.querySelectorAll('.track-element-view');\n          target.forEach(el => {\n            observer.observe(el);\n          });\n          client.observers.IntersectionObserver = observer;\n        }\n      }\n    }   \n\n    return client;\n  };\n}\n\nfunction getSecondsSinceDate(date) {\n  return Math.round(getMiliSecondsSinceDate(date) / 1000);\n}\n\nfunction getMiliSecondsSinceDate(date) {\n  return new Date().getTime() - date.getTime();\n}\n\nfunction getDomain(hostname) {\n  var p = hostname.split('.');\n  return [p.pop(), p.pop()].reverse().join('.')\n}\n","import { getScreenProfile } from './getScreenProfile';\nimport { getWindowProfile } from './getWindowProfile';\n\nexport function getBrowserProfile() {\n  return {\n    'cookies'    : ('undefined' !== typeof navigator.cookieEnabled) ? navigator.cookieEnabled : false,\n    'codeName'   : navigator.appCodeName,\n    'description': getDocumentDescription(),\n    'language'   : navigator.language,\n    'name'       : navigator.appName,\n    'online'     : navigator.onLine,\n    'platform'   : navigator.platform,\n    'useragent'  : navigator.userAgent,\n    'version'    : navigator.appVersion,\n    'doNotTrack' : navigator.doNotTrack,\n    'screen'     : getScreenProfile(),\n    'window'     : getWindowProfile()\n  }\n}\n\nfunction getDocumentDescription() {\n  var el;\n  if (document && typeof document.querySelector === 'function') {\n    el = document.querySelector('meta[name=\"description\"]');\n  }\n  return el ? el.content : '';\n}\n","export function getDatetimeIndex(input){\n  var date = input || new Date();\n  return {\n    'hour_of_day'  : date.getHours(),\n    'day_of_week'  : parseInt( 1 + date.getDay() ),\n    'day_of_month' : date.getDate(),\n    'month'        : parseInt( 1 + date.getMonth() ),\n    'year'         : date.getFullYear()\n  };\n}\n","function extractHostname(url) {\n    var hostname;\n    //find & remove protocol (http, ftp, etc.) and get hostname\n\n    if (url.indexOf(\"://\") > -1) {\n        hostname = url.split('/')[2];\n    }\n    else {\n        hostname = url.split('/')[0];\n    }\n\n    //find & remove port number\n    hostname = hostname.split(':')[0];\n    //find & remove \"?\"\n    hostname = hostname.split('?')[0];\n\n    return hostname;\n}\n\n// To address those who want the \"root domain,\" use this function:\nexport function getDomainName(url) {\n    var domain = extractHostname(url),\n        splitArr = domain.split('.'),\n        arrLen = splitArr.length;\n\n    //extracting the root domain here\n    //if there is a subdomain\n    if (arrLen > 2) {\n        domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];\n        //check to see if it's using a Country Code Top Level Domain (ccTLD) (i.e. \".me.uk\")\n        if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n            //this is using a ccTLD\n            domain = splitArr[arrLen - 3] + '.' + domain;\n        }\n    }\n    return domain;\n}","import { getDomNodePath } from './getDomNodePath';\n\nexport function getDomNodeProfile(el) {\n  return {\n    action: el.action,\n    class: el.className,\n    href: getElementProps(el, 'href'),\n    id: getElementProps(el, 'id'),\n    event_key: getElementProps(el, 'data-event-key'),\n    method: el.method,\n    name: el.name,\n    node_name: el.nodeName,\n    selector: getDomNodePath(el),\n    text: getElementProps(el, 'text') || getElementProps(el, \"innerText\"),\n    value: getElementProps(el, 'value'),\n    title: getElementProps(el, 'title'),\n    data_attributes: getDataAttributes(el),\n    type: el.type,\n    x_position: el.offsetLeft || el.clientLeft || null,\n    y_position: el.offsetTop || el.clientTop || null\n  };\n}\n\nconst getDataAttributes = (el) => {\n  let data = {};\n  [].forEach.call(el.attributes, function(attr) {\n      if (/^data-/.test(attr.name)) {\n          let camelCaseName = attr.name.substr(5).replace(/-(.)/g, function ($0, $1) {\n              return $1.toUpperCase();\n          });\n          data[camelCaseName] = attr.value;\n      }\n  }); \n  return data\n} \n\n\nconst getElementProps = (el, prop) => {\n  if (el[prop]) {\n    return el[prop];\n  }\n  if (el.hasAttribute && el.hasAttribute(prop)) {\n    return el.getAttribute(prop);\n  }\n  if (el.parentNode) {\n    return getElementProps(el.parentNode, prop);\n  }\n  return null;\n};\n","import extend from '../../core/utils/extend';\n\nexport function getScrollState(obj){\n  var config = typeof obj === 'object' ? obj : {};\n  var state = extend({\n    pixel: 0,\n    pixel_max: 0,\n    ratio: null,\n    ratio_max: null\n  }, config);\n\n  if (typeof window !== undefined || typeof document !== undefined) {\n    state.pixel = getScrollOffset() + getWindowHeight();\n    if (state.pixel > state.pixel_max) {\n      state.pixel_max = state.pixel;\n    }\n    state.ratio = parseFloat(Number(state.pixel / getScrollableArea()).toFixed(2));\n    state.ratio_max = parseFloat(Number(state.pixel_max / getScrollableArea()).toFixed(2));\n  }\n\n  return state;\n}\n\nfunction getScrollableArea() {\n  var body = document.body;\n  var html = document.documentElement;\n  return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null;\n}\n\nfunction getScrollOffset() {\n  return (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n}\n\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement.clientHeight;\n}\n","export const getURLParams = function(search) {\n    const hashes = search.slice(search.indexOf('?') + 1).split('&')\n    const params = {}\n    hashes.map(hash => {\n        let [key, val] = hash.split('=')\n        key = decodeURIComponent(key)\n        if (key.indexOf('[') > -1) { // handle multiple type inputs\n            if (typeof params[key] === 'undefined') {\n                params[key] = []\n            }\n\n            params[key].push(decodeURIComponent(val))\n        } else {\n            params[key] = decodeURIComponent(val)\n        }\n    })\n    return params\n}","export const getUTMObject = function(params) {\n    let { utm_source = null, utm_medium = null, utm_campaign = null, utm_term = null, utm_content = null } = params\n    return {\n        utm_source,\n        utm_campaign, \n        utm_medium,\n        utm_term,\n        utm_content\n    }\n}\n\n","export function getUniqueId() {\n  // uuidv4\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    // browser\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    )\n  } else {\n    // node & older browsers\n    let str = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    return str.replace(/[xy]/g, function(c) {\n      let r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  }\n}\n","import Cookies from 'js-cookie';\nimport extend from '../../core/utils/extend';\n\nexport const cookie = function(str){\n  if (!arguments.length) return;\n  if (this instanceof cookie === false) {\n    return new cookie(str);\n  }\n\n  this.config = {\n    key: str,\n    options: {\n      expires: 365\n    }\n  };\n  this.data = this.get();\n  return this;\n}\n\ncookie.prototype.get = function(str){\n  var data = {};\n\n  if (Cookies.get(this.config.key)) {\n    data = Cookies.getJSON(this.config.key);\n  }\n  if (str && typeof data === 'object' && typeof data !== null) {\n    return (typeof data[str] !== 'undefined') ? data[str] : null;\n  }\n  else {\n    return data;\n  }\n};\n\ncookie.prototype.set = function(str, value, options){\n  if (!arguments.length || !this.enabled()) return this;\n  if (typeof str === 'string' && arguments.length >= 2) {\n    this.data[str] = value ? value : null;\n  }\n  else if (typeof str === 'object' && arguments.length === 1) {\n    extend(this.data, str);\n  }\n  Cookies.set(\n    this.config.key,\n    this.data,\n    extend(this.config.options, options || {})\n  );\n  return this;\n};\n\ncookie.prototype.expire = function(daysUntilExpire){\n  if (daysUntilExpire) {\n    Cookies.set(\n      this.config.key,\n      this.data,\n      extend(this.config.options, { expires: daysUntilExpire })\n    );\n  } else {\n    Cookies.remove(this.config.key);\n    this.data = {};\n  }\n  return this;\n};\n\ncookie.prototype.options = function(obj){\n  if (!arguments.length) return this.config.options;\n  this.config.options = (typeof obj === 'object') ? obj : {};\n  return this;\n};\n\ncookie.prototype.enabled = function(){\n  return navigator.cookieEnabled;\n};\n","/*!\n * JavaScript Cookie v2.1.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar _OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = _OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.get = api.set = api;\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/*\n  This is a modified copy of https://github.com/defunctzombie/form-serialize/ v0.7.1\n  Includes a new configuration option:\n    * ignoreTypes - Array, Default: [], Example: [ 'password' ]\n*/\n\n// types which indicate a submit action and are not successful controls\n// these will be ignored\nvar k_r_submitter = /^(?:submit|button|image|reset|file)$/i;\n\n// node names which could be successful controls\nvar k_r_success_contrls = /^(?:input|select|textarea|keygen)/i;\n\n// Matches bracket notation.\nvar brackets = /(\\[[^\\[\\]]*\\])/g;\n\n// serializes form fields\n// @param form MUST be an HTMLForm element\n// @param options is an optional argument to configure the serialization. Default output\n// with no options specified is a url encoded string\n//    - hash: [true | false] Configure the output type. If true, the output will\n//    be a js object.\n//    - serializer: [function] Optional serializer function to override the default one.\n//    The function takes 3 arguments (result, key, value) and should return new result\n//    hash and url encoded str serializers are provided with this module\n//    - disabled: [true | false]. If true serialize disabled fields.\n//    - empty: [true | false]. If true serialize empty fields\nexport function serializeForm(form, options) {\n  if (typeof options != 'object') {\n    options = { hash: !!options };\n  }\n  else if (options.hash === undefined) {\n    options.hash = true;\n  }\n\n  var result = (options.hash) ? {} : '';\n  var serializer = options.serializer || ((options.hash) ? hash_serializer : str_serialize);\n\n  var elements = form && form.elements ? form.elements : [];\n\n  // Object store each radio and set if it's empty or not\n  var radio_store = Object.create(null);\n\n  for (var i=0 ; i<elements.length ; ++i) {\n    var element = elements[i];\n\n    // NEW: Skip ignored field types\n    if (options.ignoreTypes && options.ignoreTypes.indexOf(element.type) > -1) {\n      continue;\n    }\n    // ingore disabled fields\n    if ((!options.disabled && element.disabled) || !element.name) {\n      continue;\n    }\n    // ignore anyhting that is not considered a success field\n    if (!k_r_success_contrls.test(element.nodeName) ||\n      k_r_submitter.test(element.type)) {\n      continue;\n    }\n\n    var key = element.name;\n    var val = element.value;\n\n    // we can't just use element.value for checkboxes cause some browsers lie to us\n    // they say \"on\" for value when the box isn't checked\n    if ((element.type === 'checkbox' || element.type === 'radio') && !element.checked) {\n      val = undefined;\n    }\n\n    // If we want empty elements\n    if (options.empty) {\n      if (element.type === 'checkbox' && !element.checked) {\n        val = '';\n      }\n\n      // for radio\n      if (element.type === 'radio') {\n        if (!radio_store[element.name] && !element.checked) {\n          radio_store[element.name] = false;\n        }\n        else if (element.checked) {\n          radio_store[element.name] = true;\n        }\n      }\n\n      // if options empty is true, continue only if its radio\n      if (val == undefined && element.type == 'radio') {\n        continue;\n      }\n    }\n    else {\n      // value-less fields are ignored unless options.empty is true\n      if (!val) {\n        continue;\n      }\n    }\n\n    // multi select boxes\n    if (element.type === 'select-multiple') {\n      val = [];\n\n      var selectOptions = element.options;\n      var isSelectedOptions = false;\n      for (var j=0 ; j<selectOptions.length ; ++j) {\n        var option = selectOptions[j];\n        var allowedEmpty = options.empty && !option.value;\n        var hasValue = (option.value || allowedEmpty);\n        if (option.selected && hasValue) {\n          isSelectedOptions = true;\n\n          // If using a hash serializer be sure to add the\n          // correct notation for an array in the multi-select\n          // context. Here the name attribute on the select element\n          // might be missing the trailing bracket pair. Both names\n          // \"foo\" and \"foo[]\" should be arrays.\n          if (options.hash && key.slice(key.length - 2) !== '[]') {\n            result = serializer(result, key + '[]', option.value);\n          }\n          else {\n            result = serializer(result, key, option.value);\n          }\n        }\n      }\n\n      if (!isSelectedOptions && options.empty) {\n        result = serializer(result, key, '');\n      }\n      continue;\n    }\n\n    result = serializer(result, key, val);\n  }\n\n  if (options.empty) {\n    for (var key in radio_store) {\n      if (!radio_store[key]) {\n        result = serializer(result, key, '');\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction parse_keys(string) {\n  var keys = [];\n  var prefix = /^([^\\[\\]]*)/;\n  var children = new RegExp(brackets);\n  var match = prefix.exec(string);\n\n  if (match[1]) {\n      keys.push(match[1]);\n  }\n\n  while ((match = children.exec(string)) !== null) {\n      keys.push(match[1]);\n  }\n\n  return keys;\n}\n\nfunction hash_assign(result, keys, value) {\n  if (keys.length === 0) {\n    result = value;\n    return result;\n  }\n\n  var key = keys.shift();\n  var between = key.match(/^\\[(.+?)\\]$/);\n\n  if (key === '[]') {\n    result = result || [];\n\n    if (Array.isArray(result)) {\n      result.push(hash_assign(null, keys, value));\n    }\n    else {\n      // This might be the result of bad name attributes like \"[][foo]\",\n      // in this case the original `result` object will already be\n      // assigned to an object literal. Rather than coerce the object to\n      // an array, or cause an exception the attribute \"_values\" is\n      // assigned as an array.\n      result._values = result._values || [];\n      result._values.push(hash_assign(null, keys, value));\n    }\n\n    return result;\n  }\n\n  // Key is an attribute name and can be assigned directly.\n  if (!between) {\n    result[key] = hash_assign(result[key], keys, value);\n  }\n  else {\n    var string = between[1];\n    // +var converts the variable into a number\n    // better than parseInt because it doesn't truncate away trailing\n    // letters and actually fails if whole thing is not a number\n    var index = +string;\n\n    // If the characters between the brackets is not a number it is an\n    // attribute name and can be assigned directly.\n    if (isNaN(index)) {\n      result = result || {};\n      result[string] = hash_assign(result[string], keys, value);\n    }\n    else {\n      result = result || [];\n      result[index] = hash_assign(result[index], keys, value);\n    }\n  }\n\n  return result;\n}\n\n// Object/hash encoding serializer.\nfunction hash_serializer(result, key, value) {\n  var matches = key.match(brackets);\n\n  // Has brackets? Use the recursive assignment function to walk the keys,\n  // construct any missing objects in the result tree and make the assignment\n  // at the end of the chain.\n  if (matches) {\n    var keys = parse_keys(key);\n    hash_assign(result, keys, value);\n  }\n  else {\n    // Non bracket notation can make assignments directly.\n    var existing = result[key];\n\n    // If the value has been assigned already (for instance when a radio and\n    // a checkbox have the same name attribute) convert the previous value\n    // into an array before pushing into it.\n    //\n    // NOTE: If this requirement were removed all hash creation and\n    // assignment could go through `hash_assign`.\n    if (existing) {\n      if (!Array.isArray(existing)) {\n        result[key] = [ existing ];\n      }\n\n      result[key].push(value);\n    }\n    else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n// urlform encoding serializer\nfunction str_serialize(result, key, value) {\n  // encode newlines as \\r\\n cause the html spec says so\n  value = value.replace(/(\\r)?\\n/g, '\\r\\n');\n  value = encodeURIComponent(value);\n\n  // spaces should be '+' rather than '%20'.\n  value = value.replace(/%20/g, '+');\n  return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + value;\n}\n","export function timer(num){\n  if (this instanceof timer === false) {\n    return new timer(num);\n  }\n  this.count = num || 0;\n  return this;\n}\n\ntimer.prototype.start = function(){\n  var self = this;\n  this.pause();\n  this.interval = setInterval(function(){\n    self.count++;\n  }, 1000);\n  return this;\n};\n\ntimer.prototype.pause = function(){\n  clearInterval(this.interval);\n  return this;\n};\n\ntimer.prototype.value = function(){\n  return this.count;\n};\n\ntimer.prototype.clear = function(){\n  this.count = 0;\n  return this;\n};\n"],"sourceRoot":""}